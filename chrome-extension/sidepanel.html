<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Client Manager</title>
    <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Add New Client</h1>
        </div>

        <div id="validation-section" class="validation-section" style="display: none;">
            <div class="validation-message">
                <div class="spinner"></div>
                <p>Validating API key...</p>
            </div>
        </div>

        <div id="error-section" class="error-section" style="display: none;">
            <div class="error-message">
                <h2>⚠️ Configuration Error</h2>
                <p id="error-text"></p>
                <button id="open-settings-btn" class="btn btn-primary">Open Settings</button>
            </div>
        </div>

        <div id="form-section" class="form-section" style="display: none;">
            <div class="auto-fill-section">
                <button type="button" id="auto-fill-btn" class="btn btn-auto-fill">
                    Auto Fill from Page
                </button>
                <div id="auto-fill-status" class="status-message"></div>
            </div>
            <form id="client-form">
                <div class="form-group">
                    <label for="full-name">Full Name *</label>
                    <input type="text" id="full-name" required>
                </div>

                <div class="form-group">
                    <label for="status">Status *</label>
                    <select id="status" required>
                        <option value="">Loading...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="navigator">Assigned Navigator *</label>
                    <select id="navigator" required>
                        <option value="">Select a navigator</option>
                        <option value="">Loading...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="address">Address *</label>
                    <textarea id="address" rows="3" required></textarea>
                </div>

                <div class="form-group">
                    <label for="phone">Phone *</label>
                    <input type="tel" id="phone" required>
                </div>

                <div class="form-group">
                    <label for="secondary-phone">Secondary Phone</label>
                    <input type="tel" id="secondary-phone">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email">
                </div>

                <div class="form-group">
                    <label for="notes">General Notes</label>
                    <textarea id="notes" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Service Type *</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="service-type" value="Food" checked>
                            <span>Food</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="service-type" value="Boxes">
                            <span>Boxes</span>
                        </label>
                    </div>
                </div>

                <div class="form-group" id="auth-units-group" style="display: block;">
                    <label for="auth-units">Auth Units Per Week</label>
                    <input type="number" id="auth-units" min="0" value="21" placeholder="Enter authorized units per week">
                </div>

                <div class="form-group">
                    <label for="authorized-amount">Authorized Amount</label>
                    <input type="number" id="authorized-amount" min="0" step="0.01" placeholder="Enter authorized amount (e.g., 100.00)">
                </div>

                <div class="form-group">
                    <label for="expiration-date">Expiration Date</label>
                    <input type="date" id="expiration-date" placeholder="Select expiration date">
                </div>

                <div class="form-group">
                    <label for="case-url">Case URL *</label>
                    <input type="text" id="case-url" placeholder="https://app.uniteus.io/dashboard/cases/open/..." required>
                </div>

                <div id="form-status" class="status-message"></div>

                <button type="submit" id="submit-btn" class="btn btn-submit" disabled>Submit</button>
            </form>
        </div>

        <div class="footer">
            <button id="settings-btn" class="btn btn-settings">
                <span>⚙️</span> Settings
            </button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button id="close-settings" class="btn-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="settings-api-key">API Key:</label>
                    <input type="text" id="settings-api-key" placeholder="Enter API key">
                </div>
                <div class="form-group">
                    <label for="settings-base-url">Base URL:</label>
                    <input type="text" id="settings-base-url" placeholder="https://your-site.com" value="https://www.trianglesquareservices.com">
                </div>
                <div id="settings-status" class="status-message"></div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">Save Settings</button>
                <button id="test-connection" class="btn btn-secondary">Test Connection</button>
            </div>
        </div>
    </div>

    <script src="sidepanel.js"></script>
</body>
</html>

